<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>GAME HUB PRO</title>
    <style>
        :root {
            --cyan: #00f2ff; --pink: #ff00ff; --gold: #fbc02d; --bg: #030308;
            --glass: rgba(255, 255, 255, 0.07);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg);
            color: #fff;
            font-family: 'Avenir Next', 'Segoe UI', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
        }

        /* Sidebar Navigation */
        nav {
            width: 100px;
            background: rgba(0,0,0,0.9);
            border-right: 1px solid #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 0;
            z-index: 10;
        }

        .nav-icon {
            width: 60px; height: 60px;
            margin-bottom: 30px;
            background: var(--glass);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .nav-icon:active { transform: scale(0.8) rotate(-10deg); background: var(--cyan); color: #000; }
        .nav-icon.active { background: var(--cyan); color: #000; box-shadow: 0 0 20px var(--cyan); }

        /* Main Viewport */
        main { flex: 1; position: relative; overflow: hidden; background: radial-gradient(circle at center, #11112b 0%, #000 100%); }

        .view {
            position: absolute; inset: 0;
            padding: 60px;
            transition: 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            overflow-y: auto;
        }

        .view.hidden { transform: translateY(100%); opacity: 0; pointer-events: none; }

        /* Header & Titles */
        .header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 50px; }
        .header h1 { font-size: 60px; font-weight: 900; letter-spacing: -2px; }
        .bank { font-size: 32px; font-weight: 900; color: var(--gold); background: rgba(0,0,0,0.4); padding: 10px 30px; border-radius: 50px; border: 1px solid var(--gold); }

        /* App Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }
        .card {
            background: var(--glass);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 40px;
            padding: 40px;
            backdrop-filter: blur(20px);
            transition: 0.4s;
            cursor: pointer;
        }

        .card:hover { transform: translateY(-15px); border-color: var(--cyan); background: rgba(0, 242, 255, 0.05); }
        .card h3 { font-size: 32px; margin: 20px 0 10px; }
        .card p { opacity: 0.5; line-height: 1.6; }

        /* Game Interface Overlay */
        #game-overlay {
            position: fixed; inset: 0;
            background: #000;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }

        #stage { flex: 1; position: relative; cursor: none; }
        canvas { display: block; width: 100%; height: 100%; }

        /* Split-Control iPad Layout */
        .controls {
            height: 320px;
            background: #0a0a0f;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid #222;
        }

        .joy-outer {
            width: 180px; height: 180px;
            background: rgba(255,255,255,0.03);
            border: 3px solid var(--cyan);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }

        .joy-stick {
            width: 80px; height: 80px;
            background: var(--cyan);
            border-radius: 50%;
            box-shadow: 0 0 30px var(--cyan);
        }

        .action-zone {
            width: 250px; height: 120px;
            background: linear-gradient(45deg, var(--pink), #7000ff);
            border-radius: 60px;
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: 900;
            box-shadow: 0 0 40px rgba(255, 0, 255, 0.4);
        }

        .exit-btn {
            position: absolute; top: 40px; right: 40px;
            background: rgba(0,0,0,0.6);
            border: 1px solid #f44; color: #f44;
            padding: 15px 30px; border-radius: 15px; font-weight: bold;
        }
    </style>
</head>
<body>

<nav>
    <div class="nav-icon active" onclick="setView('home')">üè†</div>
    <div class="nav-icon" onclick="setView('shop')">üíé</div>
    <div class="nav-icon" onclick="setView('settings')">‚öôÔ∏è</div>
</nav>

<main>
    <div id="home" class="view">
        <div class="header">
            <div>
                <p style="color: var(--cyan); font-weight: bold; letter-spacing: 2px;">WELCOME BACK</p>
                <h1>Game HUB</h1>
            </div>
            <div class="bank">$<span id="bank-total">0</span></div>
        </div>
        
        <div class="grid">
            <div class="card" onclick="play('war')">
                <div style="font-size: 80px;">üõ∏</div>
                <h3>Galaxy War</h3>
                <p>Advanced 3D-Tilt flight combat with high-velocity particles.</p>
            </div>
            <div class="card" style="opacity: 0.4;">
                <div style="font-size: 80px;">üèéÔ∏è</div>
                <h3>Neon Racer</h3>
                <p>Coming Soon. Unlock at Level 10.</p>
            </div>
        </div>
    </div>

    <div id="shop" class="view hidden">
        <h1>The Armory</h1>
        <div class="grid" style="margin-top: 40px;">
            <div class="card">
                <h3>Rapid Fire</h3>
                <p>Double your shooting speed.</p>
                <div style="color: var(--gold); margin-top: 20px; font-weight: bold;">$5,000</div>
            </div>
        </div>
    </div>
</main>

<div id="game-overlay">
    <div id="stage">
        <div id="game-hud" style="position: absolute; top: 40px; left: 40px; font-size: 50px; font-weight: 900; color: var(--gold);">$0</div>
        <canvas id="c"></canvas>
        <button class="exit-btn" onclick="exit()">QUIT</button>
    </div>
    
    <div class="controls">
        <div class="joy-outer" id="j-base">
            <div class="joy-stick" id="j-stick"></div>
        </div>
        <div class="action-zone" id="fire-btn">BURST</div>
    </div>
</div>

<script>
    const d = document, cvs = d.getElementById('c'), ctx = cvs.getContext('2d');
    let bank = 0, score = 0, active = false;
    let player = { x: 0, y: 0, tilt: 0 }, joy = { x: 0, y: 0, down: false };
    let bullets = [], enemies = [], fx = [];

    function setView(id) {
        d.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
        d.getElementById(id).classList.remove('hidden');
        d.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    function play(mode) {
        d.getElementById('game-overlay').style.display = 'flex';
        cvs.width = innerWidth;
        cvs.height = innerHeight - 320;
        player.x = cvs.width / 2;
        player.y = cvs.height - 150;
        active = true;
        score = 0;
        updateHUD();
        loop();
    }

    function exit() {
        active = false;
        d.getElementById('game-overlay').style.display = 'none';
        d.getElementById('bank-total').innerText = bank;
    }

    // iPad Pro Optimized Input
    const stick = d.getElementById('j-stick');
    d.getElementById('j-base').addEventListener('touchstart', () => joy.down = true);
    d.addEventListener('touchmove', e => {
        if (!joy.down) return;
        const t = e.touches[0];
        const b = d.getElementById('j-base').getBoundingClientRect();
        const centerX = b.left + b.width/2, centerY = b.top + b.height/2;
        const dx = t.clientX - centerX, dy = t.clientY - centerY;
        const dist = Math.min(70, Math.hypot(dx, dy));
        const ang = Math.atan2(dy, dx);
        joy.x = (Math.cos(ang) * dist) / 70;
        joy.y = (Math.sin(ang) * dist) / 70;
        stick.style.transform = `translate(${joy.x * 50}px, ${joy.y * 50}px)`;
        player.tilt = joy.x;
    });
    d.addEventListener('touchend', () => { joy.down = false; joy.x = 0; joy.y = 0; stick.style.transform = 'none'; player.tilt = 0; });

    d.getElementById('fire-btn').addEventListener('touchstart', () => {
        if (active) bullets.push({ x: player.x, y: player.y - 60 });
    });

    function updateHUD() { d.getElementById('game-hud').innerText = '$' + score; }

    function drawShip() {
        ctx.save();
        ctx.translate(player.x, player.y);
        ctx.rotate(player.tilt * 0.4);
        ctx.shadowBlur = 30; ctx.shadowColor = varColor('--cyan');
        ctx.fillStyle = varColor('--cyan');
        ctx.beginPath();
        ctx.moveTo(0, -50); ctx.lineTo(-40, 30); ctx.lineTo(0, 10); ctx.lineTo(40, 30); ctx.closePath();
        ctx.fill();
        ctx.restore();
    }

    function varColor(name) { return getComputedStyle(d.documentElement).getPropertyValue(name); }

    function loop() {
        if (!active) return;
        ctx.fillStyle = 'rgba(3, 3, 8, 0.3)';
        ctx.fillRect(0, 0, cvs.width, cvs.height);

        // Player Motion
        player.x = Math.max(60, Math.min(cvs.width - 60, player.x + joy.x * 20));
        player.y = Math.max(60, Math.min(cvs.height - 60, player.y + joy.y * 20));
        drawShip();

        // Combat
        bullets.forEach((b, i) => {
            b.y -= 25;
            ctx.fillStyle = varColor('--gold');
            ctx.fillRect(b.x - 3, b.y, 6, 30);
            if (b.y < -50) bullets.splice(i, 1);
        });

        if (Math.random() < 0.05) enemies.push({ x: Math.random() * (cvs.width - 100) + 50, y: -100, s: 5 + Math.random() * 5 });
        enemies.forEach((e, i) => {
            e.y += e.s;
            ctx.shadowBlur = 20; ctx.shadowColor = varColor('--pink');
            ctx.fillStyle = varColor('--pink');
            ctx.beginPath();
            ctx.moveTo(e.x, e.y + 40); ctx.lineTo(e.x - 30, e.y - 20); ctx.lineTo(e.x + 30, e.y - 20); ctx.closePath();
            ctx.fill();

            bullets.forEach((b, bi) => {
                if (Math.hypot(b.x - e.x, b.y - e.y) < 50) {
                    for(let k=0; k<20; k++) fx.push({ x: e.x, y: e.y, vx: (Math.random()-0.5)*15, vy: (Math.random()-0.5)*15, l: 1 });
                    enemies.splice(i, 1); bullets.splice(bi, 1);
                    score += 150; bank += 150; updateHUD();
                }
            });
            if (e.y > cvs.height + 100) enemies.splice(i, 1);
        });

        fx.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy; p.l -= 0.03;
            ctx.globalAlpha = p.l; ctx.fillStyle = varColor('--pink');
            ctx.fillRect(p.x, p.y, 6, 6);
            if (p.l <= 0) fx.splice(i, 1);
        });
        ctx.globalAlpha = 1; ctx.shadowBlur = 0;

        requestAnimationFrame(loop);
    }
</script>
</body>
</html>